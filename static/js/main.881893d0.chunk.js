(this["webpackJsonpnext-bus-react"]=this["webpackJsonpnext-bus-react"]||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),i=n(4),a=n.n(i),r=(n(9),n(2)),o=(n(10),n(0)),l=function(){var e=Object(c.useRef)(-1),t=Object(c.useState)(["--","--"]),n=Object(r.a)(t,2),s=n[0],i=n[1];return Object(c.useEffect)((function(){return e.current=window.setInterval((function(){var e=new Date,t=Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}).format(e).split(":");i([t[0],t[1]])}),500),function(){window.clearInterval(e.current)}}),[]),Object(o.jsxs)("div",{className:"currentTime",children:[Object(o.jsx)("span",{children:s[0]}),Object(o.jsx)("span",{className:"currentTimeColon",children:":"}),Object(o.jsx)("span",{children:s[1]})]})};var u=function(e,t){return e.index-t.index},d=function(){var e=new Date;return{index:60*e.getHours()+e.getMinutes(),label:function(e){if(e>0&&e<6)return 0;if(6===e)return 1;if(0===e)return 2;throw new Error("invalid arg: dayOfWeek must be between 0 ~ 6")}(e.getDay())}},j=function(e){var t=e.headerData,n=t.busStop,c=t.dest;return Object(o.jsxs)("div",{className:"header centerAlignedColumn",children:[Object(o.jsx)("div",{className:"stopNameLabel",children:n}),Object(o.jsxs)("div",{className:"destinationDisplay",children:[Object(o.jsx)("div",{className:"destinationLabel",children:c}),Object(o.jsx)(h,{})]}),Object(o.jsx)(l,{})]})},b=function(e){var t=e.fullList,n=d(),c=t.filter(function(e){var t=e.index,n=e.label;return function(e){return e.label===n&&e.index>t&&e.index<=t+120}}(n)).sort(u).slice(0,4);return c.length<1&&console.warn("no times found"),Object(o.jsx)("div",{className:"stopTimeList",children:c.map((function(e,t){return console.log(e),Object(o.jsxs)("div",{className:"stopTimeRow","data-row":t,style:{fontSize:"".concat(4-t,"em")},children:[Object(o.jsx)("div",{className:"hour",children:e.hour}),Object(o.jsx)("div",{className:"colon",children:":"}),Object(o.jsxs)("div",{className:"minuteAndNote",children:[Object(o.jsx)("div",{className:"minute",children:e.minute}),e.note&&Object(o.jsx)("div",{className:"stopTimeNote",children:" (".concat(e.note,")")})]})]},"".concat(e.index,"-").concat(e.note))}))})};function f(e){return/ofuna/g.test(e)}var h=function(){var e=Object(c.useState)((function(){return f(window.location.search)?"ofuna":"totsuka"})),t=Object(r.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){var e="?dest=".concat(n);window.location.search!==e&&(window.location.search=e)}),[n]);return Object(o.jsx)(m,{onClick:function(){s((function(e){return f(e)?"totsuka":"ofuna"}))}})},m=function(e){var t=e.onClick;return Object(o.jsxs)("div",{className:"swapIcon",role:"button",onClick:t,children:[Object(o.jsx)("div",{className:"swapArrow top",children:"\u2192"}),Object(o.jsx)("div",{className:"swapArrow bottom",children:"\u2190"})]})},O=window.location.search,x=O.length>0?O:"?dest=Totsuka",v="https://script.google.com/macros/s/AKfycbwdm0nmrVJdptlecVeL0VrGfLJz2DyJ65qv-aFcixFtB5-kyJ0rfJLE7yBShRlM0B14tg/exec"+"".concat(x);var w=function(){var e,t=Object(c.useState)(!1),n=Object(r.a)(t,2),s=n[0],i=n[1],a=Object(c.useState)(null),l=Object(r.a)(a,2),u=l[0],d=l[1];Object(c.useEffect)((function(){s||window.fetch(v).then((function(e){return e.text()})).then(JSON.parse).then((function(e){return{header:e.header,times:e.times}})).then((function(e){i(!0),d(e)}))}),[s]);var f=x.split("="),h=Object(r.a)(f,2),m=(h[0],null!==(e=h[1].toLowerCase())&&void 0!==e?e:"totsuka");return Object(o.jsxs)("div",{className:"App","data-dest":m,children:[Object(o.jsxs)("div",{className:"stopTimeReport",children:[!s&&Object(o.jsx)("div",{className:"loading",children:"loading..."}),u&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(j,{headerData:u.header}),Object(o.jsx)(b,{fullList:u.times})]})]}),Object(o.jsx)("div",{id:"modalMountPoint"})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),i(e),a(e)}))},g=.01*(window.innerHeight+20);document.documentElement.style.setProperty("--vh","".concat(g,"px")),a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root")),p()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.881893d0.chunk.js.map