(this["webpackJsonpnext-bus-react"]=this["webpackJsonpnext-bus-react"]||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(4),i=n.n(a),o=(n(9),n(2)),r=(n(10),n(0)),u=function(){var e=Object(c.useRef)(-1),t=Object(c.useState)(["--","--"]),n=Object(o.a)(t,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){return e.current=window.setInterval((function(){var e=new Date,t=Intl.DateTimeFormat("ja-JP",{hour:"2-digit",minute:"2-digit"}).format(e).split(":");a([t[0],t[1]])}),500),function(){window.clearInterval(e.current)}}),[]),Object(r.jsxs)("div",{className:"currentTime",children:[Object(r.jsx)("span",{children:s[0]}),Object(r.jsx)("span",{className:"currentTimeColon",children:":"}),Object(r.jsx)("span",{children:s[1]})]})},d=function(e,t){return e.index-t.index},j=function(e){var t=e.headerData,n=t.busStop,c=t.dest;return Object(r.jsxs)("div",{className:"header centerAlignedColumn",children:[Object(r.jsx)("div",{className:"stopNameLabel",children:n}),Object(r.jsxs)("div",{className:"destinationDisplay",children:[Object(r.jsx)("div",{className:"destinationLabel",children:c}),Object(r.jsx)(h,{})]}),Object(r.jsx)(u,{})]})},l=function(e){var t=e.stopTimes,n=e.index,c=t.filter((function(e){return e.index>=n})).sort(d).slice(0,4);return c.length<1&&console.warn("no times found"),Object(r.jsx)("div",{className:"stopTimeList",children:c.map((function(e,t){return Object(r.jsxs)("div",{className:"stopTimeRow","data-row":t,style:{fontSize:"".concat(4-t,"em")},children:[Object(r.jsx)("div",{className:"hour",children:e.hour}),Object(r.jsx)("div",{className:"colon",children:Object(r.jsx)("div",{children:":"})}),Object(r.jsx)("div",{className:"minute",children:(n=e.minute,"".concat(n<10?"0":"").concat(n))}),e.note&&Object(r.jsx)("div",{className:"stopTimeNote",children:Object(r.jsx)("div",{children:"(".concat(e.note,")")})})]},"".concat(e.index,"-").concat(e.note));var n}))})};function b(e){return/ofuna/g.test(e)}var h=function(){var e=Object(c.useState)((function(){return b(window.location.search)?"ofuna":"totsuka"})),t=Object(o.a)(e,2),n=t[0],s=t[1];Object(c.useEffect)((function(){var e="?dest=".concat(n);window.location.search!==e&&(window.location.search=e)}),[n]);return Object(r.jsx)(m,{onClick:function(){s((function(e){return b(e)?"totsuka":"ofuna"}))}})},m=function(e){var t=e.onClick;return Object(r.jsxs)("div",{className:"swapIcon",role:"button",onClick:t,children:[Object(r.jsx)("div",{className:"swapArrow top",children:"\u2192"}),Object(r.jsx)("div",{className:"swapArrow bottom",children:"\u2190"})]})};var f=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),i=Object(o.a)(a,2),u=i[0],d=i[1],b=Object(c.useState)("totsuka"),h=Object(o.a)(b,2),m=h[0],f=h[1],O=Object(c.useState)(function(){var e=new Date;return 60*e.getHours()+e.getMinutes()}()),x=Object(o.a)(O,2),v=x[0];return x[1],Object(c.useEffect)((function(){if(!n){var e,t=(e=document.location.search,/ofuna/g.test(e.toLowerCase())?"ofuna":"totsuka");f(t);var c=function(e,t){var n="?dest=".concat(e,"&index=").concat(t);return"https://script.google.com/macros/s/".concat("AKfycbzhVQD402fi91IlcT9tndtmAvspn2V6noTkh9465JOuUtUcPyoWjhvgkFuQcmC26tPQ3A","/exec").concat(n)}(t,v);window.fetch(c).then((function(e){return e.text()})).then(JSON.parse).then((function(e){return{header:e.header,times:e.times}})).then((function(e){s(!0),d(e)}))}}),[n,v]),Object(r.jsxs)("div",{className:"App","data-dest":m,children:[Object(r.jsxs)("div",{className:"stopTimeReport",children:[!n&&Object(r.jsx)("div",{className:"loading",children:"loading..."}),u&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j,{headerData:u.header}),Object(r.jsx)(l,{stopTimes:u.times,index:v})]})]}),Object(r.jsx)("div",{id:"modalMountPoint"})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))},x=.01*(window.innerHeight+20);document.documentElement.style.setProperty("--vh","".concat(x,"px")),i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(f,{})}),document.getElementById("root")),O()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.9ec5b3bd.chunk.js.map